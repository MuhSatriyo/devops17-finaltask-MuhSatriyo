# Provision servers using Terraform

Pada bagian ini saya membuat 3 VM menggunaan terraform dengan spesifikasi sebagai berikut:
 - Appserver - 2 vCPU, 2GB RAM
 - Monitoring - 2 vCPU, 2GB RAM
 - Gateway - 2 vCPU, 1GB RAM

Kemudian pada ubuntu 20.04 yang saya jalankan di WSL (Windows Subsystem for Linux) saya membuat folder yang masing-masing folder tersebut terdapat file `main.tf` seperti berikut:
![alt text](https://github.com/MuhSatriyo/devops17-dumbways--Muhammad-Satriyo-Yuwono-/blob/main/First%20Week/Image/B.png?raw=true)
```
terraform {
  required_providers {
    idcloudhost = {
      source = "bapung/idcloudhost"
      version = "0.1.3"
    }
  }
}

provider "idcloudhost" {
  auth_token = "mTWvAHka6YmhUncBxKZyCpeL40C7Kyc0"
  region = "jkt01"
}

resource "idcloudhost_vm" "power4" {
  name = "satriyo-appserver"
  os_name = "ubuntu"
  os_version = "20.04"
  vcpu = 2
  memory = 2048
  disks = 20
  username = "satriyo"
  initial_password = "appSERVER123#"
  public_key = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDSOvwIwYr9w1dBPqSbXmZLGiqhEp7SiQpTXaT1powVBGwKStTICAoEcLI78u0Fn0Dqm5wUa/8bCGo83Bz2XePQAxAEON2tvHrmifp41vuTdzfCeODCWkT6vKMJUoZ0EKdQkGIL39XPsm+sLVXTIGMHmr9MFqR9RfxTr6jlu66IJ/h8ju6J+jbqsaUJUz69iacuggxsqJEExE5ZzVTBZo1Pnckbj+KY/gDcaUPKjpw9pcUTiQFWMG76sVISmtuDTMq2konGMU0wh2Gj4n7VuQWQiTi+aIASifFEGpXrUBkdZod7skciPIH2u8F8/T1KWSLviZQ1tCyzYucV76wglUmuIUNOjXhjXbtGjI4jcIG5RlJm7ccloJHH280NJNT+TOzHaCu/OL1rELYldptiUfC2i78TBLr5jT4b3acvgS2TQSxwUeGq6KWkFsIvTgKBJeiwt2DDiGciW419BKaHeCXEPQ2tLQ+bnGqcAaStbpGxzbE7/zuKiRLZhmREFgajhSk= yuwono@LAPTOP-GSAO448B"
  billing_account_id = "1200157626"
}

resource "idcloudhost_vm" "power2" {
  name = "satriyo-gateway"
  os_name = "ubuntu"
  os_version = "20.04"
  vcpu = 2
  memory = 1024
  disks = 20
  username = "satriyo"
  initial_password = "appSERVER123#"
  public_key = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDSOvwIwYr9w1dBPqSbXmZLGiqhEp7SiQpTXaT1powVBGwKStTICAoEcLI78u0Fn0Dqm5wUa/8bCGo83Bz2XePQAxAEON2tvHrmifp41vuTdzfCeODCWkT6vKMJUoZ0EKdQkGIL39XPsm+sLVXTIGMHmr9MFqR9RfxTr6jlu66IJ/h8ju6J+jbqsaUJUz69iacuggxsqJEExE5ZzVTBZo1Pnckbj+KY/gDcaUPKjpw9pcUTiQFWMG76sVISmtuDTMq2konGMU0wh2Gj4n7VuQWQiTi+aIASifFEGpXrUBkdZod7skciPIH2u8F8/T1KWSLviZQ1tCyzYucV76wglUmuIUNOjXhjXbtGjI4jcIG5RlJm7ccloJHH280NJNT+TOzHaCu/OL1rELYldptiUfC2i78TBLr5jT4b3acvgS2TQSxwUeGq6KWkFsIvTgKBJeiwt2DDiGciW419BKaHeCXEPQ2tLQ+bnGqcAaStbpGxzbE7/zuKiRLZhmREFgajhSk= yuwono@LAPTOP-GSAO448B"
  billing_account_id = "1200157626"
}

resource "idcloudhost_vm" "power3" {
  name = "satriyo-monitoring"
  os_name = "ubuntu"
  os_version = "20.04"
  vcpu = 2
  memory = 2048
  disks = 20
  username = "satriyo"
  initial_password = "appSERVER123#"
  public_key = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDSOvwIwYr9w1dBPqSbXmZLGiqhEp7SiQpTXaT1powVBGwKStTICAoEcLI78u0Fn0Dqm5wUa/8bCGo83Bz2XePQAxAEON2tvHrmifp41vuTdzfCeODCWkT6vKMJUoZ0EKdQkGIL39XPsm+sLVXTIGMHmr9MFqR9RfxTr6jlu66IJ/h8ju6J+jbqsaUJUz69iacuggxsqJEExE5ZzVTBZo1Pnckbj+KY/gDcaUPKjpw9pcUTiQFWMG76sVISmtuDTMq2konGMU0wh2Gj4n7VuQWQiTi+aIASifFEGpXrUBkdZod7skciPIH2u8F8/T1KWSLviZQ1tCyzYucV76wglUmuIUNOjXhjXbtGjI4jcIG5RlJm7ccloJHH280NJNT+TOzHaCu/OL1rELYldptiUfC2i78TBLr5jT4b3acvgS2TQSxwUeGq6KWkFsIvTgKBJeiwt2DDiGciW419BKaHeCXEPQ2tLQ+bnGqcAaStbpGxzbE7/zuKiRLZhmREFgajhSk= yuwono@LAPTOP-GSAO448B"
  billing_account_id = "1200157626"
}

resource "idcloudhost_floating_ip" "ipempat" {
  name = "app4-ip"
  billing_account_id = 1200157626
  assigned_to = idcloudhost_vm.power4.id
}

resource "idcloudhost_floating_ip" "ipdua" {
  name = "app2-ip"
  billing_account_id = 1200157626
  assigned_to = idcloudhost_vm.power2.id
}

resource "idcloudhost_floating_ip" "iptiga" {
  name = "app3-ip"
  billing_account_id = 1200157626
  assigned_to = idcloudhost_vm.power3.id
}
```
